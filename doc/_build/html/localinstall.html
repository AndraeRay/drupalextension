<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Stand-alone installation &mdash; the Drupal Extension to Behat and Mink 1.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="the Drupal Extension to Behat and Mink 1.1 documentation" href="index.html" />
    <link rel="next" title="System-wide installation" href="globalinstall.html" />
    <link rel="prev" title="System Requirements" href="requirements.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="globalinstall.html" title="System-wide installation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="requirements.html" title="System Requirements"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">the Drupal Extension to Behat and Mink 1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="stand-alone-installation">
<h1>Stand-alone installation<a class="headerlink" href="#stand-alone-installation" title="Permalink to this headline">Â¶</a></h1>
<p>A stand-alone installation is recommended when you want your tests and testing
environment to be portable, from local development to CI server, to client
infrastructure. It also make documentation consistent and reliable.</p>
<ol class="arabic">
<li><p class="first">Create a folder for your BDD tests:</p>
<div class="highlight-python"><div class="highlight"><pre>mkdir projectfolder cd projectfolder
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div>All the commands that follow are written to install from the root of your
project folder.</div></blockquote>
<ol class="arabic" start="2">
<li><p class="first">Install Composer, a php package manager:</p>
<div class="highlight-python"><div class="highlight"><pre>curl -s https://getcomposer.org/installer | php
</pre></div>
</div>
</li>
<li><p class="first">Create a composer.json file to tell Composer what to install.  To do that,
paste the following code into your editor and save as composer.json. The
Drupal Extension requires Behat, Mink, and the Mink Extension. The will all
be set up because they&#8217;re dependencies of the Drupal Extension, so you don&#8217;t
have to specify them directly in the composer.json file:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">&quot;require&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;drupal/drupal-extension&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0.*@stable&quot;</span>
<span class="p">},</span>
  <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;bin-dir&quot;</span><span class="o">:</span> <span class="s2">&quot;bin/&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<ol class="arabic" start="4">
<li><p class="first">Run the following command to install the Drupal Extension and all those
dependencies. This takes a while before you start to see output:</p>
<div class="highlight-python"><div class="highlight"><pre>php composer.phar install
</pre></div>
</div>
</li>
<li><p class="first">Configure your testing environment by creating a file called behat.yml with
the following. Be sure that you point the base_url at the web site YOU intend
to test. Do not include a trailing slash:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="l-Scalar-Plain">default</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">paths</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">features</span><span class="p-Indicator">:</span> <span class="s">&#39;features&#39;</span>
  <span class="l-Scalar-Plain">extensions</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Behat\MinkExtension\Extension</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">goutte</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>
      <span class="l-Scalar-Plain">selenium2</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>
      <span class="l-Scalar-Plain">base_url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://seven.l</span>
    <span class="l-Scalar-Plain">Drupal\DrupalExtension\Extension</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">blackbox</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<ol class="arabic" start="6">
<li><p class="first">Initialze behat. This creates the features folder with some basic things to
get you started, including your own FeatureContext.php file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">bin</span><span class="o">/</span><span class="n">behat</span> <span class="o">--</span><span class="n">init</span>
</pre></div>
</div>
</li>
<li><p class="first">Edit features/bootstrap/FeatureContext.php so that it matches the following:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Behat\Behat\Context\ClosuredContextInterface</span><span class="p">,</span>
    <span class="nx">Behat\Behat\Context\TranslatedContextInterface</span><span class="p">,</span>
    <span class="nx">Behat\Behat\Context\BehatContext</span><span class="p">,</span>
    <span class="nx">Behat\Behat\Exception\PendingException</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Behat\Gherkin\Node\PyStringNode</span><span class="p">,</span>
    <span class="nx">Behat\Gherkin\Node\TableNode</span><span class="p">;</span>

<span class="c1">//</span>
<span class="c1">// Require 3rd-party libraries here:</span>
<span class="c1">//</span>
<span class="c1">//   require_once &#39;PHPUnit/Autoload.php&#39;;</span>
<span class="c1">//   require_once &#39;PHPUnit/Framework/Assert/Functions.php&#39;;</span>
<span class="c1">//</span>

<span class="sd">/**</span>
<span class="sd"> * Features context.</span>
<span class="sd"> */</span>
<span class="hll"><span class="c1">// class FeatureContext extends BehatContext </span>
</span><span class="hll"><span class="k">class</span> <span class="nc">FeatureContext</span> <span class="k">extends</span> <span class="nx">Drupal\DrupalExtension\Context\DrupalContext</span>
</span><span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Initializes context.</span>
<span class="sd">     * Every scenario gets its own context object.</span>
<span class="sd">     *</span>
<span class="sd">     * @param array $parameters context parameters (set them in behat.yml)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="k">array</span> <span class="nv">$parameters</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Initialize your context here</span>
    <span class="p">}</span>

<span class="c1">//</span>
<span class="c1">// Place your definition and hook methods here:</span>
<span class="c1">//</span>
<span class="c1">//    /**</span>
<span class="c1">//     * @Given /^I have done something with &quot;([^&quot;]*)&quot;$/</span>
<span class="c1">//     */</span>
<span class="c1">//    public function iHaveDoneSomethingWith($argument)</span>
<span class="c1">//    {</span>
<span class="c1">//        doSomethingWith($argument);</span>
<span class="c1">//    }</span>
<span class="c1">//</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>This will make your FeatureContext.php aware of both the Drupal Extension and
the Mink Extension, so you&#8217;ll be able to take advantage of their drivers and
step definitions and add your own custom step definitions as well.</p>
</div></blockquote>
<ol class="arabic" start="8">
<li><p class="first">To ensure everything is set up appropriately, type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">bin</span><span class="o">/</span><span class="n">behat</span> <span class="o">-</span><span class="n">dl</span>
</pre></div>
</div>
<p>You&#8217;ll see a list of steps like the following, but longer, if you&#8217;ve
installed everything successfully:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-gherkin"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span class="nf"> </span><span class="k">Given </span><span class="nf">/^(?:that I|I) am at &quot;</span><span class="s">(?P[^</span><span class="nf">&quot;]*)&quot;</span><span class="s">$/</span>
<span class="s">     - Visit a given path, and additionally check for HTTP response code</span>
<span class="s">       200.</span>
<span class="s">     # Drupal\DrupalExtension\Context\DrupalContext::iAmAt()</span>

<span class="s">  When /^I visit </span><span class="nf">&quot;(?P[^&quot;</span><span class="s">]*)</span><span class="nf">&quot;$/</span>
<span class="nf">     </span><span class="c"># Drupal\DrupalExtension\Context\DrupalContext::iVisit()</span><span class="nf"></span>

<span class="nf">  </span><span class="k">When </span><span class="nf">/^I click &quot;</span><span class="s">(?P</span><span class="nv">&lt;link&gt;</span><span class="s">[^</span><span class="nf">&quot;]*)&quot;</span><span class="s">$/</span>
<span class="s">     # Drupal\DrupalExtension\Context\DrupalContext::iClick()</span>

<span class="s"> Given /^for </span><span class="nf">&quot;(?P</span><span class="nv">&lt;field&gt;</span><span class="nf">[^&quot;</span><span class="s">]*)</span><span class="nf">&quot; I enter &quot;</span><span class="s">(?P</span><span class="nv">&lt;value&gt;</span><span class="s">[^</span><span class="nf">&quot;]*)&quot;</span><span class="s">$/</span>
<span class="s">     # Drupal\DrupalExtension\Context\DrupalContext::forIenter()</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="requirements.html"
                        title="previous chapter">System Requirements</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="globalinstall.html"
                        title="next chapter">System-wide installation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/localinstall.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="globalinstall.html" title="System-wide installation"
             >next</a> |</li>
        <li class="right" >
          <a href="requirements.html" title="System Requirements"
             >previous</a> |</li>
        <li><a href="index.html">the Drupal Extension to Behat and Mink 1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>