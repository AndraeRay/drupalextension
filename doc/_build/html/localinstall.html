

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Stand-alone installation &mdash; the Drupal Extension to Behat and Mink 1.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="the Drupal Extension to Behat and Mink 1.1 documentation" href="index.html"/>
        <link rel="next" title="System-wide installation" href="globalinstall.html"/>
        <link rel="prev" title="System Requirements" href="requirements.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> the Drupal Extension to Behat and Mink</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Testing your site with the Drupal Extension to Behat and Mink</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-do-behat-and-mink-do">What do Behat and Mink Do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-does-the-drupal-extension-add">What does the Drupal Extension add?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">System Requirements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="requirements.html#meet-the-system-requirements">Meet the system requirements</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Stand-alone installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="globalinstall.html">System-wide installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="globalinstall.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="globalinstall.html#install-composer">Install Composer</a></li>
<li class="toctree-l2"><a class="reference internal" href="globalinstall.html#install-the-drupal-extension">Install the Drupal Extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="globalinstall.html#set-up-tests">Set up tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="drivers.html">Drupal Extension Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="blackbox.html">Blackbox Driver</a><ul>
<li class="toctree-l2"><a class="reference internal" href="blackbox.html#region-steps">Region steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="blackbox.html#example">Example:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="drush.html">Drush Driver</a><ul>
<li class="toctree-l2"><a class="reference internal" href="drush.html#install-drush">Install Drush</a></li>
<li class="toctree-l2"><a class="reference internal" href="drush.html#create-a-drush-alias">Create a Drush alias</a></li>
<li class="toctree-l2"><a class="reference internal" href="drush.html#enable-the-drush-driver-in-the-behat-yml">Enable the Drush driver in the behat.yml</a></li>
<li class="toctree-l2"><a class="reference internal" href="drush.html#calling-the-drush-driver">Calling the Drush driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="drupalapi.html">Drupal API Driver</a><ul>
<li class="toctree-l2"><a class="reference internal" href="drupalapi.html#enable-the-drupal-api-driver">Enable the Drupal API Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="subcontexts.html">Contributed Module Subcontexts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="subcontexts.html#discovering-subcontexts">Discovering SubContexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="subcontexts.html#disable-autoloading">Disable autoloading</a></li>
<li class="toctree-l2"><a class="reference internal" href="subcontexts.html#for-contributors">For Contributors</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">the Drupal Extension to Behat and Mink</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Stand-alone installation</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/localinstall.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="stand-alone-installation">
<h1>Stand-alone installation<a class="headerlink" href="#stand-alone-installation" title="Permalink to this headline">Â¶</a></h1>
<p>A stand-alone installation is recommended when you want your tests and testing
environment to be portable, from local development to CI server, to client
infrastructure. It also make documentation consistent and reliable.</p>
<ol class="arabic">
<li><p class="first">Create a folder for your BDD tests:</p>
<div class="highlight-python"><div class="highlight"><pre>mkdir projectfolder cd projectfolder
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div>All the commands that follow are written to install from the root of your
project folder.</div></blockquote>
<ol class="arabic" start="2">
<li><p class="first">Install Composer, a php package manager:</p>
<div class="highlight-python"><div class="highlight"><pre>curl -s https://getcomposer.org/installer | php
</pre></div>
</div>
</li>
<li><p class="first">Create a composer.json file to tell Composer what to install.  To do that,
paste the following code into your editor and save as composer.json. The
Drupal Extension requires Behat, Mink, and the Mink Extension. The will all
be set up because they&#8217;re dependencies of the Drupal Extension, so you don&#8217;t
have to specify them directly in the composer.json file:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">&quot;require&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;drupal/drupal-extension&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0.*@stable&quot;</span>
<span class="p">},</span>
  <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;bin-dir&quot;</span><span class="o">:</span> <span class="s2">&quot;bin/&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<ol class="arabic" start="4">
<li><p class="first">Run the following command to install the Drupal Extension and all those
dependencies. This takes a while before you start to see output:</p>
<div class="highlight-python"><div class="highlight"><pre>php composer.phar install
</pre></div>
</div>
</li>
<li><p class="first">Configure your testing environment by creating a file called behat.yml with
the following. Be sure that you point the base_url at the web site YOU intend
to test. Do not include a trailing slash:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="l-Scalar-Plain">default</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">paths</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">features</span><span class="p-Indicator">:</span> <span class="s">&#39;features&#39;</span>
  <span class="l-Scalar-Plain">extensions</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Behat\MinkExtension\Extension</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">goutte</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>
      <span class="l-Scalar-Plain">selenium2</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>
      <span class="l-Scalar-Plain">base_url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://seven.l</span>
    <span class="l-Scalar-Plain">Drupal\DrupalExtension\Extension</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">blackbox</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<ol class="arabic" start="6">
<li><p class="first">Initialze behat. This creates the features folder with some basic things to
get you started, including your own FeatureContext.php file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">bin</span><span class="o">/</span><span class="n">behat</span> <span class="o">--</span><span class="n">init</span>
</pre></div>
</div>
</li>
<li><p class="first">Edit features/bootstrap/FeatureContext.php so that it matches the following:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Behat\Behat\Context\ClosuredContextInterface</span><span class="p">,</span>
    <span class="nx">Behat\Behat\Context\TranslatedContextInterface</span><span class="p">,</span>
    <span class="nx">Behat\Behat\Context\BehatContext</span><span class="p">,</span>
    <span class="nx">Behat\Behat\Exception\PendingException</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Behat\Gherkin\Node\PyStringNode</span><span class="p">,</span>
    <span class="nx">Behat\Gherkin\Node\TableNode</span><span class="p">;</span>

<span class="c1">//</span>
<span class="c1">// Require 3rd-party libraries here:</span>
<span class="c1">//</span>
<span class="c1">//   require_once &#39;PHPUnit/Autoload.php&#39;;</span>
<span class="c1">//   require_once &#39;PHPUnit/Framework/Assert/Functions.php&#39;;</span>
<span class="c1">//</span>

<span class="sd">/**</span>
<span class="sd"> * Features context.</span>
<span class="sd"> */</span>
<span class="hll"><span class="c1">// class FeatureContext extends BehatContext </span>
</span><span class="hll"><span class="k">class</span> <span class="nc">FeatureContext</span> <span class="k">extends</span> <span class="nx">Drupal\DrupalExtension\Context\DrupalContext</span>
</span><span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Initializes context.</span>
<span class="sd">     * Every scenario gets its own context object.</span>
<span class="sd">     *</span>
<span class="sd">     * @param array $parameters context parameters (set them in behat.yml)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="k">array</span> <span class="nv">$parameters</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Initialize your context here</span>
    <span class="p">}</span>

<span class="c1">//</span>
<span class="c1">// Place your definition and hook methods here:</span>
<span class="c1">//</span>
<span class="c1">//    /**</span>
<span class="c1">//     * @Given /^I have done something with &quot;([^&quot;]*)&quot;$/</span>
<span class="c1">//     */</span>
<span class="c1">//    public function iHaveDoneSomethingWith($argument)</span>
<span class="c1">//    {</span>
<span class="c1">//        doSomethingWith($argument);</span>
<span class="c1">//    }</span>
<span class="c1">//</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>This will make your FeatureContext.php aware of both the Drupal Extension and
the Mink Extension, so you&#8217;ll be able to take advantage of their drivers and
step definitions and add your own custom step definitions as well.</p>
</div></blockquote>
<ol class="arabic" start="8">
<li><p class="first">To ensure everything is set up appropriately, type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">bin</span><span class="o">/</span><span class="n">behat</span> <span class="o">-</span><span class="n">dl</span>
</pre></div>
</div>
<p>You&#8217;ll see a list of steps like the following, but longer, if you&#8217;ve
installed everything successfully:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-gherkin"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span class="nf"> </span><span class="k">Given </span><span class="nf">/^(?:that I|I) am at &quot;</span><span class="s">(?P[^</span><span class="nf">&quot;]*)&quot;</span><span class="s">$/</span>
<span class="s">     - Visit a given path, and additionally check for HTTP response code</span>
<span class="s">       200.</span>
<span class="s">     # Drupal\DrupalExtension\Context\DrupalContext::iAmAt()</span>

<span class="s">  When /^I visit </span><span class="nf">&quot;(?P[^&quot;</span><span class="s">]*)</span><span class="nf">&quot;$/</span>
<span class="nf">     </span><span class="c"># Drupal\DrupalExtension\Context\DrupalContext::iVisit()</span><span class="nf"></span>

<span class="nf">  </span><span class="k">When </span><span class="nf">/^I click &quot;</span><span class="s">(?P</span><span class="nv">&lt;link&gt;</span><span class="s">[^</span><span class="nf">&quot;]*)&quot;</span><span class="s">$/</span>
<span class="s">     # Drupal\DrupalExtension\Context\DrupalContext::iClick()</span>

<span class="s"> Given /^for </span><span class="nf">&quot;(?P</span><span class="nv">&lt;field&gt;</span><span class="nf">[^&quot;</span><span class="s">]*)</span><span class="nf">&quot; I enter &quot;</span><span class="s">(?P</span><span class="nv">&lt;value&gt;</span><span class="s">[^</span><span class="nf">&quot;]*)&quot;</span><span class="s">$/</span>
<span class="s">     # Drupal\DrupalExtension\Context\DrupalContext::forIenter()</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="globalinstall.html" class="btn btn-neutral float-right" title="System-wide installation"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="requirements.html" class="btn btn-neutral" title="System Requirements"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>